---
import Section from '@/components/Section.astro';
import LearnMoreButton from '../LearnMoreButton.astro';
import BlockQuote from '../BlockQuote.astro';
import PSeqApplication from '../PSeq-Application.astro';
---

<Section>
  <h2 id="problem-statement">The precision medicine revolution <i>promised transformation</i>...</h2>
  <h2 class="slide-ready ml-15 mb-10" style="--delay: 1s;">... after 25 years, there are too many <i>disappointments</i>.</h2>

  <div class="problems-container mb-10">
    <PSeqApplication 
      image="/images/icons/missing-breakthroughs.webp"
      imgAlt="Drug development Icon"
    >
      <div slot="title">Therapeutic breakthroughs?<br />Mostly missing.</div>
    </PSeqApplication>
    <PSeqApplication 
      image="/images/icons/low-response-rates.webp"
      imgAlt="Drug development Icon"
    >
      <div slot="title">Drug response rates<br />remain stubbornly low.</div>
    </PSeqApplication>      
    <PSeqApplication 
      image="/images/icons/few-companion-dx.webp"
      imgAlt="Drug development Icon"
    >
      <div slot="title">Diagnostic biomarkers<br />mostly inconclusive.</div>
    </PSeqApplication>     
    <PSeqApplication 
      image="/images/icons/drug-success.webp"
      imgAlt="Drug development Icon"
    >
      <div slot="title">Few drug candidates<br />reach FDA approval.</div>
    </PSeqApplication>       
  </div>
  
  <LearnMoreButton 
    link="/stalled-genomic-revolution"
    ariaLabel="Get more details about the stalled genomic revolution." 
  />
  <br />
  <BlockQuote 
    text="The need for a re-thinking of biology is urgent. Huge resources are directed to the search for the genes that cause human disease. Rare inherited disease traits are often associated with a specific gene abnormality, but they affect only a few percent of the human disease burden: in this context genetics is clinically useful. Common, or so-called polygenic disease traits, potentially affecting everyone, have not yet yielded, in a clinically useable way. The reason is that genes are not responsible for common disease traits."
    imageUrl="/images/baverstock.webp"
    imageAlt="Headshot of Keith Baverstockn"
  >
    <b>Keith Baverstock</b><br />University of Eastern Finland, 2021
  </BlockQuote>   
  <h3 class="py-7 text-3xl font-bold leading-snug">The genomic revolution has plateaued. Weâ€™re fixing that.</h3>
</Section>
<style>
h2 {
  font-size: 2.1rem;
  padding: 10px;
}

.problems-container {
  display: grid;
  grid-template-columns: repeat(4, minmax(0, 1fr));
  gap: 1rem;
}


@media (max-width:  900px) {
  .problems-container {
    grid-template-columns: repeat(2, minmax(0, 1fr));
  }
}

ul {
  display: flex;
  list-style-type: none;
  margin: 0;
  padding: 0 1.5rem;
  padding-bottom: 2rem;
  font-size: 1.5rem;
  color: text-white;
}

@keyframes fadeIn {
  from { opacity: 0; }
  to   { opacity: 1; }
}

/* start state */
.slide-ready {
  opacity: 0;
}  

:global(.fade-in) {
  animation: fadeIn 1s ease var(--delay, 0s) forwards;
}

@media (max-width: 850px) {
  h2 { font-size: 1.8rem; }
  ul { font-size: 1.4rem; }  
}

@media (max-width: 750px) {
  h2 { font-size: 1.6rem; }
  ul { font-size: 1.3rem; }  
}

@media (max-width: 600px) {
  h2 { font-size: 1.4rem; }
  ul { font-size: 1.25rem; }  
}
</style>

<script>
  document.addEventListener('DOMContentLoaded', () => {
    const targets = document.querySelectorAll('.slide-ready');
    const io = new IntersectionObserver(entries => {
      entries.forEach(entry => {
        if (entry.isIntersecting) {
          entry.target.classList.add('fade-in');
          io.unobserve(entry.target);
        }
      });
    }, { threshold: 0.25 });

    targets.forEach(el => io.observe(el));
  });
</script>