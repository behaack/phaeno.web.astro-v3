---
/**
 *  Job-posting <head> block.
 *
 *  Required props
 *    title        – Page headline (appears in tab & share card)
 *    description  – One-sentence summary (≤160 chars ideal)
 *    datePosted   – JS Date | ISO string
 *    url          – Absolute page URL (defaults to Astro.url)
 *    schema       – JobPosting JSON-LD object
 *
 *  Optional props
 *    image        – Social card image (absolute URL)
 *    authorUrl    – URL for article:author (LinkedIn/Facebook)
 */
interface Props {
  title: string;
  description: string;
  datePosted: string | Date;
  url?: string;
  image?: string;
  authorUrl?: string;
  schema: object;
  twitterCard?: 'summary_large_image' | 'summary';
}

const {
  title,
  description,
  datePosted,
  url = new URL(Astro.url.pathname, Astro.site).href,
  image = new URL('/images/phaeno-socialmedia-splash.webp', Astro.site).href,
  schema,
  twitterCard = 'summary_large_image',
} = Astro.props as Props;

const isoDate = typeof datePosted === 'string' ? datePosted : datePosted.toISOString();
---

<title>{title}</title>
<meta name="description" content={description} />
<meta name="phaeno:document-type" content="job" />
<link rel="canonical" href={url} />
<meta name="author" content="Phaeno Inc.">

<!-- Open Graph -->
<meta property="og:type"                  content="article" />
<meta property="og:url"                   content={url} />
<meta property="og:title"                 content={title} />
<meta property="og:description"           content={description} />
<meta property="og:image"                 content={image} />
<meta property="article:published_time"   content={isoDate} />
<meta property="article:author"           content="Phaeno Inc." />

<!-- Twitter -->
<meta name="twitter:card"                 content={twitterCard} />
<meta name="twitter:title"                content={title} />
<meta name="twitter:description"          content={description} />
<meta name="twitter:image"                content={image} />

<!-- Structured data -->
<script
  is:inline
  type="application/ld+json"
  set:html={JSON.stringify(schema)}
/>
