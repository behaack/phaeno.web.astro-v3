---
import '@/styles/global.css';
import Header from './header/Header.astro';
import Footer from './footer/short-version/Footer.astro';
import ScrollBehavior from '@/components/script-components/ScrollBehavior.astro';
import MenuBehavior from '@/components/script-components/MenuBehavior.astro';

/** Canonical URL (per-page, so we keep it) */
const canonical = new URL(Astro.url.pathname, Astro.site).href;
---
<html lang="en-US">
  <head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1" />

    <!-- Canonical & favicon -->
    <link rel="canonical" href={canonical} />
    <link rel="icon" type="image/webp" href="/favicon.webp" sizes="64x64">
    <link rel="icon" type="image/png"  href="/favicon.png"  sizes="64x64">
    <link rel="shortcut icon" href="/favicon.ico">    

    <!-- Sitemap -->
    <link rel="sitemap" href="/sitemap-index.xml" />

    <!-- Site verification - Algolia -->
  <meta name="algolia-site-verification"  content="67465B629349804B" />

    <!-- â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€ Fonts (non-blocking) â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€ -->
    <link rel="preconnect" href="https://fonts.googleapis.com" />
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin />

    <link
      rel="preload"
      href="https://fonts.googleapis.com/css2?family=Inter:wght@400;600;700&display=swap"
      as="style"
    />
    <link
      rel="stylesheet"
      href="https://fonts.googleapis.com/css2?family=Inter:wght@400;600;700&display=swap"
      media="print"
      onload="this.media='all'"
    />
    <noscript>
      <link
        rel="stylesheet"
        href="https://fonts.googleapis.com/css2?family=Inter:wght@400;600;700&display=swap"
      />
    </noscript>

    <!-- ðŸ”´  REMOVED: hard-wired <title>, description, OG & Twitter tags -->

    <!-- Optional global brand tags that never change -->
    <meta property="og:site_name" content="Phaeno" />
    <meta name="twitter:site"     content="@Phaeno" />

    <!-- Page-specific head goes here -->
    <slot name="head" />
  </head>

  <body class="bg-white">
    <a 
      id="skip-link"
      href="#main" 
      class="skip-link"
      onclick="document.getElementById('main').focus()"
    >
      Skip to main content
    </a>    

    <Header />
    <div class="page-container">
      <slot />
    </div>
    <Footer id="site-footer" />

    <ScrollBehavior />
    <MenuBehavior />
  </body>
</html>

<style>
.page-container {
  display: flex;
  flex-direction: column;
  align-items: center;
  width: 100%;
  height: 100%;
}

.skip-link {
  position: fixed;        /* always relative to viewport */
  top: 1rem;            /* tweak to clear your header */
  left: 0.5rem;
  z-index: 9999;          /* higher than header/nav */
  background: #fff;
  color: #789946;
  padding: 0.5rem 1rem;
  border: 2px solid #789946;
  border-radius: 4px;  

  /* Off-screen until it gets focus */
  transform: translateY(-150%);
  transition: transform 0.2s ease;
}

/* Slide in only for keyboard focus */
.skip-link:focus-visible {
  transform: translateY(0);
} 

@media (max-width: 725px) {
  .skip-link {
    top: .5rem;
padding: 0.25rem 1rem;
  }         
}
</style>

